# Проектная работа по актуализации модели данных
## Создание витрины данных для RFM-классификации пользователей приложения для компании, которая разрабатывает приложение по доставке еды.

## 1. Построение витрины для RFM-анализа
### 1.1. Требования к целевой витрине
В базе две схемы: production и analysis. В схеме `production` содержатся оперативные таблицы.

**Задача:** — построить витрину для RFM-классификации. 
Витрину нужно назвать `dm_rfm_segments`. Сохранить в хранилище данных, а именно — в схему `analysis`.

**Факторы RFM-классификации**

Присвойте каждому клиенту три значения — значение фактора Recency, значение фактора Frequency и значение фактора Monetary Value:
* Фактор **Recency** измеряется по последнему заказу. Распределите клиентов по шкале от одного до пяти, где значение 1 получат те, кто либо вообще не делал заказов, либо делал их очень давно, а 5 — те, кто заказывал относительно недавно.
* Фактор **Frequency** оценивается по количеству заказов. Распределите клиентов по шкале от одного до пяти, где значение 1 получат клиенты с наименьшим количеством заказов, а 5 — с наибольшим.
* Фактор **Monetary Value** оценивается по потраченной сумме. Распределите клиентов по шкале от одного до пяти, где значение 1 получат клиенты с наименьшей суммой, а 5 — с наибольшей.

**Период:** с начала 2022 года

**Поля:**
* `user_id` - идентификатор клиента
* `recency` (число от 1 до 5) — сколько времени прошло с момента последнего заказа.
* `frequency` (число от 1 до 5) — количество заказов.
* `monetary_value` (число от 1 до 5) — сумма затрат клиента.

**Обновление данных:** не требуется.

**Дополнительные условия**
* Для анализа нужно отобрать только успешно выполненные заказы (со статусом 'Closed').
* Количество клиентов в каждом сегменте должно быть одинаково. Например, если в базе всего 100 клиентов, то 20 клиентов должны получить значение 1, ещё 20 — значение 2 и т. д.

### 1.2. Структура исходных данных
Исходные данные содержатся в схеме `production`, состоящей из 6 таблиц. Из них нам необходимы 3: `users`, `orders`, `orderstatuses`

Для построения витрины нам понадобятся следующие поля:
* `users.id` - идентификатор клиента (тип int4)
* `orderstatuses.key`- статус заказа (тип varchar(255))
* `orderstatuses.id` - идентификатор статуса заказа (тип int4)
* `orders.user_id` - идентификатор клиента (тип int4)
* `orders.order_id` - идентификатор заказа (тип int4)
* `orders.order_ts` - дата и время совершения заказа (тип timestamp)
* `orders.payment` - сумма оплаты по заказу (тип numeric(19,5))




 Название проекта       | Описание          | Навыки и инструменты  |
| ------------- |:-------------:| -----:|
| [Название1](https://www.google.com)     | right-aligned | $1600 |
| [Название2](https://www.google.com)      | centered      |   $12 |
| [Название3](https://www.google.com)  | are neat      |    $1 |
